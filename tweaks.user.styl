/* ==UserStyle==
@name         Coolify Enhanced UI
@version      1.4
@namespace    techwithanirudh
@updateURL    https://github.com/techwithanirudh/coolify-tweaks/raw/main/tweaks.user.styl
@preprocessor stylus
@description  Enhance Coolify’s UI with extra spacing, soft rounded corners, subtle shadows, and token-based colour overrides.
@include      *://coolify.local/*
@license      MIT
==/UserStyle== */

@-moz-document url-prefix("*://coolify.local/*"), url-prefix("https://app.coolify.io") {

/* =============================================================================
   0 ▸ COLOUR TOKEN OVERRIDES
   Override Coolify’s built-in --color-* variables *first* so the whole UI
   instantly adopts your palette. Then alias a few friendly --cfy-* names.
============================================================================= */
:root,
html[data-theme="dark"] {
    /* Neutral ladder tuned to your values */
    --color-base           : #1F1C23;   /* body / main canvas               */
    --color-coolgray-100   : #26252B;   /* secondary surfaces / inputs      */
    --color-coolgray-200   : #2A292E;   /* CONTAINER bg (grids, sections)   */
    --color-coolgray-300   : #353239;   /* CARD bg                          */
    --color-coolgray-400   : #3D3A40;   /* raised states, hovers            */
    --color-coolgray-500   : #45424A;
    --color-coolgray-600   : #403D44;
    --color-coolgray-700   : #1A191F;   /* SIDEBAR bg                       */
    --color-coolgray-800   : #151419;
    --color-coolgray-900   : #101014;

    /* Brand accent (your purple) */
    --color-coollabs       : #4C3495;
    --color-coollabs-100   : unquote('color-mix(in srgb, #4C3495 75%, #fff)');

    /* Semantic states (unchanged) */
    --color-success        : #16a34a;
    --color-warning        : #fcd452;
    --color-error          : #dc2626;
}

/* Friendly aliases so you don’t have to re-hunt variable names later */
:root {
    --cfy-accent          : var(--color-coollabs);        /* #4C3495  */
    --cfy-accent-light    : var(--color-coollabs-100);    /* tint     */
    --cfy-sidebar-bg      : var(--color-coolgray-700);    /* #1A191F  */
    --cfy-secondary       : var(--color-coolgray-100);    /* #26252B  */
    --cfy-content-bg      : var(--color-base);            /* #1F1C23  */
    --cfy-card-container  : var(--color-coolgray-200);    /* #2A292E  */
    --cfy-card            : var(--color-coolgray-300);    /* #353239  */
    --cfy-text            : #FCFAFC;
    --cfy-muted           : #8E8C91;

    /* layout + effects */
    --cfy-radius          : 12px;
    --cfy-blur            : 12px;
    --cfy-shadow          : 0 4px 20px rgba(0, 0, 0, .25);
    --cfy-sidebar-w       : 230px;

    font-size             : 15px;
    color-scheme          : dark;
}

/* =============================================================================
   1 ▸ GLOBAL RESET
============================================================================= */
body,
.box,
.card,
.menu-item,
button,
a,
input,
select,
textarea {
    border         : none !important;
    box-shadow     : none !important;
    border-radius  : var(--cfy-radius) !important;
}

body,
main {
    background : var(--cfy-content-bg) !important;
    color      : var(--cfy-text);
}

/* =============================================================================
   2 ▸ SIDEBAR
============================================================================= */
[class*="lg:flex"][class*="lg:w-56"] {
    width : var(--cfy-sidebar-w) !important;
}

nav[class*="dark:border-coolgray-200"] {
    width              : 100%;
    background         : var(--cfy-sidebar-bg) !important;
    backdrop-filter    : blur(var(--cfy-blur));
    -webkit-backdrop-filter: blur(var(--cfy-blur));
    border-right       : 1px solid #ffffff10;
    overflow-y         : auto !important;
    overflow-x         : hidden;
    scrollbar-width    : thin;
    scrollbar-color    : var(--cfy-accent) transparent;
}

aside::-webkit-scrollbar {
    width : 8px;
}
aside::-webkit-scrollbar-thumb {
    background   : var(--cfy-accent);
    border-radius: 4px;
}

nav > ul > li > ul > li {
    border-radius: var(--cfy-radius) !important;
    overflow     : hidden;
}

.menu-item {
    display        : flex;
    align-items    : center;
    gap            : .6rem;
    padding        : .55rem .9rem;
    font-weight    : 500;
    color          : var(--cfy-muted);
    transition     : background .18s, color .18s;
}

.menu-item:hover,
.menu-item-active {
    background : var(--cfy-accent-light);
    color      : #fff !important;
}

.menu-item svg {
    width        : 20px;
    height       : 20px;
    stroke-width : 1.6;
    flex-shrink  : 0;
}

/* Mobile slide-in */
@media (max-width:1023px) {
    aside[class*="sidebar"] {
        position  : fixed;
        inset     : 0 0 0 0;
        transform : translateX(calc(-1 * var(--cfy-sidebar-w)));
        z-index   : 60;
        transition: transform .25s;
    }
    body.sidebar-open aside { transform: none; }
    body.sidebar-open::after {
        content   : "";
        position  : fixed;
        inset     : 0;
        background: #0009;
        z-index   : 50;
    }
}
/* Desktop push */
@media (min-width:1024px) {
    main { padding-left: var(--cfy-sidebar-w) !important; }
}

/* =============================================================================
   3 ▸ TOP SUB-NAV
============================================================================= */
.navbar-main {
    position       : sticky;
    top            : 0;
    z-index        : 45;
    padding        : .45rem .85rem;
    background     : var(--cfy-sidebar-bg);
    backdrop-filter: blur(var(--cfy-blur));
    -webkit-backdrop-filter: blur(var(--cfy-blur));
    border         : 1px solid #ffffff10;
    border-radius  : var(--cfy-radius) !important;
}

.navbar-main nav {
    display : flex;
    align-items: center;
    gap     : .8rem;
}
.navbar-main nav::-webkit-scrollbar { display: none; }

.navbar-main nav button {
    all        : unset;
    cursor     : pointer;
    padding    : .55rem 1.25rem;
    font-weight: 600;
    color      : var(--cfy-muted);
    transition : background .18s, color .18s;
}
.navbar-main nav button:hover {
    background: var(--cfy-accent-light);
    color     : #111;
}
.navbar-main nav a.active button,
.navbar-main nav a[aria-current="page"] button {
    background : var(--cfy-accent);
    color      : #111;
    box-shadow : inset 0 0 0 2px var(--cfy-accent-light);
}
.navbar-main .flex-1 { flex: 1 1 auto; }

/* =============================================================================
   4 ▸ SECTION CONTAINERS & CARDS
============================================================================= */
section>h2+div,
section>h3+div,
div[data-testid="resources-grid"],
div.grid[class*="cols"] {
    padding      : .75rem .85rem !important;
    background   : var(--cfy-card-container) !important;
    border-radius: var(--cfy-radius) !important;
    overflow     : hidden;
    margin-top   : .65rem;
}

.grid,
[class*="grid-cols"] { gap: .65rem !important; }

.box,
.box-without-bg {
    padding      : .65rem .75rem;
    background   : var(--cfy-card) !important;
    border       : 1px solid transparent;
    box-shadow   : var(--cfy-shadow) !important;
    transition   : transform .15s, box-shadow .2s, background .18s, border-color .18s;
    border-radius: var(--cfy-radius) !important;
}
.box:hover {
    transform   : translateY(-2px);
    box-shadow  : 0 8px 24px rgb(0 0 0 /.35);
    border-color: var(--cfy-accent);
    background  : unquote('color-mix(in srgb, var(--cfy-card) 70%, var(--cfy-accent) 30%)');
}

[dashed],
[class*="dashed"] {
    padding-block : 2rem !important;
    border-radius : var(--cfy-radius) !important;
    border-color  : #555 !important;
}

[role="row"]:not([dashed]) {
    background   : var(--cfy-card) !important;
    border-radius: var(--cfy-radius) !important;
    padding      : .6rem .8rem;
}

/* =============================================================================
   5 ▸ TYPOGRAPHY
============================================================================= */
h1 { font: 700 2.1rem/1.25 "Inter","SF Pro Display",sans-serif; color: var(--cfy-text); }
h2 { font: 700 1.5rem/1.35 "Inter","SF Pro Display",sans-serif; color: var(--cfy-text); }
h3 { font: 700 1.25rem/1.35 "Inter","SF Pro Display",sans-serif; color: var(--cfy-text); }
h4 { font: 700 1.1rem/1.35 "Inter","SF Pro Display",sans-serif; color: var(--cfy-text); }

.subtitle      { font-size: .95rem;  color: var(--cfy-muted); }
.box-title     { font-size: 1.05rem; font-weight: 600; }
.box-description { color: var(--cfy-muted); }

/* =============================================================================
   6 ▸ BUTTONS
============================================================================= */
button.button,
.button {
    background    : var(--cfy-accent);
    color         : #fafafa !important;
    font-weight   : 600;
    padding       : .75rem 1rem;
    border        : 1px solid #ffffff1a !important;
    border-radius : var(--cfy-radius);
    transition    : background .18s;
}
button.button:hover,
.button:hover {
    background : var(--cfy-accent-light);
    color      : #111 !important;
}

button.secondary,
.secondary {
    background : var(--cfy-secondary) !important;
    color      : var(--cfy-text) !important;
}
button.secondary:hover {
    background : var(--cfy-card-container) !important;
}

/* =============================================================================
   7 ▸ FORM CONTROLS
============================================================================= */
input.input,
textarea.input,
select.select {
    background   : #202024 !important;
    border       : 1px solid #ffffff1a !important;
    color        : var(--cfy-text);
    padding      : .75rem 1rem;
    border-radius: var(--cfy-radius) !important;
    transition   : border-color .15s, background .15s;
}
input.input:focus,
textarea.input:focus,
select.select:focus {
    border-color : var(--cfy-accent-light) !important;
    background   : #26262b !important;
}

/* =============================================================================
   8 ▸ TOASTS & MISC
============================================================================= */
ul[x-data] li>span {
    backdrop-filter : blur(var(--cfy-blur));
    background      : hsla(0,0%,100%,.05) !important;
    border          : 1px solid #ffffff18 !important;
    font-family     : "Inter", sans-serif;
}

/* Wiggle animation for icons */
@keyframes wiggle {
    0%,100% { transform: rotate(0); }
    25%     { transform: rotate(-3deg); }
    75%     { transform: rotate(3deg); }
}
.toast-no-description svg[fill="currentColor"] { animation: wiggle .6s ease; }

[x-show="popups.sponsorship"] {
    border-radius: var(--cfy-radius) !important;
    padding      : 1.25rem !important;
    background   : var(--cfy-card-container) !important;
    box-shadow   : var(--cfy-shadow) !important;
}

/* Global scrollbars */
::-webkit-scrollbar          { width: 8px; height: 8px; }
::-webkit-scrollbar-thumb    { background: #444; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #666; }

/* Focus rings */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
    outline      : 2px solid var(--cfy-accent) !important;
    outline-offset: 2px;
}

/* Misc utility tweaks */
.rounded-sm,
form,
div[class*="shadow-lg lg:border-t dark:border-coolgray-300"] {
    border-radius: var(--cfy-radius) !important;
}

.flex.gap-2>h1,
.flex.gap-2>h2,
.flex.gap-2>h3,
.flex.gap-2>h4,
.flex.items-center.gap-4>h1,
.flex.items-center.gap-4>h2,
.flex.items-center.gap-4>h3,
.flex.items-center.gap-4>h4 { margin-right: auto; }

div[class="flex items-center gap-2"]>h3,
section>h3[class="pb-2"] { font-size: 1.6rem; }

div[class="flex flex-col gap-4 max-w-2xl"] { max-width: none !important; }

input.dark\:bg-coolgray-100:where(.dark, .dark *) {
    background-color: var(--cfy-card) !important;
    border-radius   : 4px !important;
    padding         : .7rem;
    transition      : background .18s;
}

/* force some widths to full */
div[class="w-48"],
div[class*="w-64"],
div[class="w-32"],
div[class*="w-96"] { width: 100% !important; }

/* larger gap utility */
div[class*="flex flex-col gap-2"] { gap: calc(var(--spacing)*4) !important; }

a[class*="hover:underline"]:hover {
    text-decoration: none !important;
    color          : var(--cfy-muted) !important;
}

table {
    background   : var(--cfy-card-container) !important;
    border-radius: var(--cfy-radius) !important;
    margin-top   : calc(var(--spacing)*4);
    overflow     : hidden !important;
}

img[class*="w-[4.5rem] aspect-square h-[4.5rem]"] {
    border-radius: var(--cfy-radius) !important;
}

/* Hide light/theme buttons (site doesn’t support) */
button[\@click="setTheme('light')"],
button[\@click="setTheme('system')"] { display: none; }

}
