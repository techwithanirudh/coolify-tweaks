@use "globals" as *;
@use "components/ui/_button" as button;
@use "components/ui/_input" as input;

[x-show="dropdownOpen"] > div {
  border-radius: var(--radius-lg);
  background: var(--popover);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-lg);

  .dropdown-item,
  .dropdown-item-no-padding {
    @include button.button-base;
    width: 100%;
    text-align: left;
    padding: s(2) s(3);
    color: var(--popover-foreground);
    background: var(--popover);

    &:hover {
      background: var(--accent);
      color: var(--accent-foreground);
    }

    &:focus {
      outline: none;
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring) 50%, transparent);
      border-color: var(--ring);
    }
  }

  .dropdown-item-no-padding {
    padding: s(1);

    &:focus {
      box-shadow: 0 0 0 1px color-mix(in srgb, var(--ring) 50%, transparent);
      border-color: var(--ring);
    }
  }
}

// Dropdown component - scoped to specific dropdown patterns
[data-dropdown],
div[x-data][x-init*="dropdown"]:has(div[x-show^="open"]),
div[x-data]:has(div[x-show^="open"]):has([\@click*="Dropdown"]) {
  & > div:has(input[x-ref="searchInput"]) {
    padding: s(2.25);
    border: 1px solid var(--input);
    border-radius: var(--radius-md);
    background: var(--background);

    input[x-ref="searchInput"] {
      @include input.input-base;
      border: none;
      background: transparent;
    }
  }

  & > div[\@click="openDropdown()"] {
    border: 1px solid var(--input);
    border-radius: var(--radius-md);
    background: transparent;
    padding: s(0);
  }

  div[x-show^="open"] {
    border-radius: var(--radius-lg);
    background: var(--popover);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-lg);

    & > div {
      padding: s(2) s(3);
      color: var(--popover-foreground);
      background: var(--popover);
      transition:
        background 0.15s,
        color 0.15s;

      &:first-child {
        border-radius: var(--radius-lg) var(--radius-lg) 0 0;
      }

      &:last-child {
        border-radius: 0 0 var(--radius-lg) var(--radius-lg);
      }

      &:hover {
        background: var(--accent);
        color: var(--accent-foreground);
      }
    }
  }
}
