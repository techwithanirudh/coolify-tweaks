@use "globals" as *;
@use "components/ui/input" as input;
@use "components/ui/button" as button;

.search-result-item {
  border-radius: 0px;
}

// Search bar with clear button - scoped to avoid bleeding styles
div.flex.flex-1:has(button[x-show="searchQuery"]) {
  input {
    @include input.input-base;
    padding-left: s(7);
  }
}

[x-show="modalOpen"] input[x-ref="searchInput"].pl-12 {
  @include input.input-base;
  padding: s(3) s(36) s(3) s(12);
  background: var(--input) !important;
}

div.relative:has(
    > div[\@click*="openCategoryDropdown"] ~ div[x-show="openCategoryDropdown"]
  ) {
  div[\@click*="openCategoryDropdown"].py-1\.5 {
    @include button.button-base;
    background: transparent;

    @include for-dark {
      background: color-mix(in srgb, var(--input) 30%, transparent);
    }

    border: 1px solid var(--input);

    color: var(--foreground);
    box-shadow: none !important;

    > span {
      color: var(--foreground);
    }
  }

  div[x-show="openCategoryDropdown"].absolute {
    border-radius: var(--radius-lg);
    background: var(--popover);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-lg);
    display: flex;
    flex-direction: column;

    input[x-ref="categorySearchInput"] {
      @include input.input-base;
      padding: s(2) s(3);
      background: var(--background) !important;
      color: var(--foreground);
      box-shadow: none !important;
    }

    .scrollbar {
      border-radius: var(--radius-lg);

      > div {
        @include button.button-base;
        width: 100%;
        text-align: left;
        padding: s(2) s(3);
        color: var(--popover-foreground);
        background: var(--popover);

        &:hover {
          background: var(--accent);
          color: var(--accent-foreground);
        }

        &:focus {
          outline: none;
          box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring) 50%, transparent);
          border-color: var(--ring);
        }
      }

      padding: s(1);
    }
  }

  padding: s(0);
}
