---
title: Installing with Dynamic Config
description: Inject Coolify Tweaks through Traefik's rewrite-body middleware.
icon: Waypoints
---

## Introduction

Dynamic Config lets Traefik rewrite HTML responses so Coolify Tweaks loads without a browser extension. Once configured, every browser, device, and automation hitting your dashboard will get the polish automatically.

## Prerequisites

- Coolify already running with Traefik (`/data/coolify/proxy/docker-compose.yml`)
- You have access to `/data/coolify/proxy/`

![Proxy Config](/assets/installation/dynamic-config/proxy-configuration.png)

> Note: Although this guide refers to `/data/coolify/proxy/` as a terminal guide, you can also do this through the web interface by going to Servers → localhost → Proxy → Dynamic Config, and Proxy Configuration.

## Steps

### 1. Update Traefik Compose

Edit `/data/coolify/proxy/docker-compose.yml`.

Inside the existing `traefik` service, **add** these lines. Don't delete anything already there.

```yaml
services:
  traefik:
    # ...your existing keys
    ports:
      # existing ports
      - "80:80"
      - "443:443"
      - "8080:8080"
      # ✅ port for the Coolify dashboard entrypoint
      - "3000:3000" # [!code ++]
    command:
      # keep your existing flags, then add:
      # ✅ enable rewrite-body plugin to modify HTML
      - "--experimental.plugins.rewritebody.modulename=github.com/traefik/plugin-rewritebody" # [!code ++]
      - "--experimental.plugins.rewritebody.version=v0.3.1" # [!code ++]
      # ✅ add entrypoint for dashboard traffic on port 3000
      - "--entrypoints.coolify_dashboard.address=:3000" # [!code ++]
```

Save and close. **Don't restart yet.**

### 2. Create Dynamic Config

Create a new file:

`/data/coolify/proxy/dynamic/coolify-tweaks.yml`

```yaml
http:
  middlewares:
    rb-buffer:
      buffering:
        maxRequestBodyBytes: 0
        maxResponseBodyBytes: 0
        memResponseBodyBytes: 0
    rb-force-identity:
      headers:
        customRequestHeaders:
          Accept-Encoding: identity
    rb-inject-css:
      plugin:
        rewritebody:
          lastModified: true
          rewrites:
            - regex: "(?is)</head>"
              replacement: '<link rel="stylesheet" href="https://coolify-tweaks-api.techwithanirudh.com/release/latest/?asset=main.css" referrerpolicy="no-referrer" crossorigin="anonymous"></head>'
          monitoring:
            methods: [GET]
            types: ["text/html"]
    coolify-tweaks:
      chain:
        middlewares:
          - rb-buffer
          - rb-force-identity
          - rb-inject-css
```

### 3. Add Routers

#### Option A: Local Dashboard (no custom domain)

If you just access Coolify internally or via IP:

```yaml
http:
  routers:
    coolify-dashboard:
      entryPoints: [coolify_dashboard]
      rule: PathPrefix(`/`)
      service: coolify@file
      middlewares: [coolify-tweaks]
      priority: 1000
```

This serves your modified dashboard on `http://<host>:3000`.

#### Option B: Custom Domain

If you use a public domain, add this **in addition** to the router above:

> Replace `yourdomain.com` with your public domain.

```yaml
http:
  routers:
    # HTTPS injector for your domain
    coolify-https-inject:
      entryPoints: [https]
      rule: "Host(`coolify.yourdomain.com`) && !PathPrefix(`/app`) && !PathPrefix(`/terminal/ws`)"
      service: coolify@file
      middlewares: [coolify-tweaks]
      tls:
        certResolver: letsencrypt
      priority: 2000
```

What this does:

- Matches only normal dashboard pages (skips `/app` and `/terminal/ws`, which use WebSockets)
- Reuses Coolify's existing HTTPS setup with Let's Encrypt
- Injects Coolify Tweaks without touching Coolify's built-in routers

**No HTTP router is needed**, Coolify's internal config already redirects HTTP → HTTPS automatically.

### 4. Restart Traefik

Open the Coolify Proxy Settings, and Restart the Proxy.

![Restart Proxy](/assets/installation/dynamic-config/restart-proxy.png)

### 5. Verify

Visit either:

- `http://<host>:3000`
- `https://coolify.yourdomain.com`

![Page Source](/assets/installation/verify-injection.png)

Then check page source for your injected link:

```html
<link
  rel="stylesheet"
  href="https://coolify-tweaks-api.techwithanirudh.com/release/latest/?asset=main.css"
/>
```

## Custom themes

If you want every visitor to enjoy a specific palette, update the injected URL to include `?theme=THEME_ID` (matching the ID you copied from [TweakCN](https://tweakcn.com/editor/theme)) and point at the `main.css` asset:

```
https://coolify-tweaks-api.techwithanirudh.com/release/latest/?theme=THEME_ID&asset=main.css
```

Change the `<link>` tag in the dynamic config to reflect the themed URL so Traefik serves the correct stylesheet.

More information about custom themes can be found in the [Theming](/docs/style/theming) section.

## Rollback

To revert:

1. Delete `/data/coolify/proxy/dynamic/coolify-tweaks.yml`
2. Remove:

```yaml
ports:
  - "80:80"
  - "443:443"
  - "8080:8080"
  - "3000:3000" # [!code --]
command:
  - "--experimental.plugins.rewritebody.modulename=github.com/traefik/plugin-rewritebody" # [!code --]
  - "--experimental.plugins.rewritebody.version=v0.3.1" # [!code --]
  - "--entrypoints.coolify_dashboard.address=:3000" # [!code --]
```

3. Restart Traefik

## Troubleshooting

- **404 on `:3000`**: Ensure the router `coolify-dashboard` exists and port `3000:3000` is mapped.
- **Plugin not loading**: Check Traefik logs for `rewrite-body` initialization errors and ensure the plugin version matches `v0.3.1`.
